---
title: Quick Wins ‚Äì Sofort umsetzbare Verbesserungen
author: SRE Review Board
date: 2026-02-26
priority: high
effort: 1-3 Stunden
---

# üéØ QUICK WINS ‚Äì Sofort umsetzbare Verbesserungen

Diese Dokument listet **kleine, schnelle √Ñnderungen** auf, die gro√üe Wirkung haben.

---

## üî¥ KRITISCH (Heute noch)

### 1. Boot-Safeguard aktivieren ‚è±Ô∏è **10 Minuten**

**Problem:** `/boot` ist zu 93% voll, n√§chster Build schl√§gt fehl

**L√∂sung:**
```bash
# 1. Kopiere das Modul
sudo cp /mnt/user-data/outputs/00-core/boot-safeguard.nix /etc/nixos/00-core/

# 2. Aktiviere in configuration.nix
sudo micro /etc/nixos/configuration.nix
# ‚Üí Zeile hinzuf√ºgen:
#    ./00-core/boot-safeguard.nix

# 3. Test-Build (OHNE /boot zu f√ºllen)
sudo nixos-rebuild dry-run

# 4. Aktivieren
sudo nixos-rebuild switch

# 5. Pr√ºfen
boot-check
```

**Ergebnis:**
- ‚úÖ Automatisches Cleanup t√§glich
- ‚úÖ Max. 5 Generationen auf /boot
- ‚úÖ Pre-Build Check verhindert Overflow

---

### 2. SSH Recovery Window ‚è±Ô∏è **15 Minuten**

**Problem:** Bei Key-Verlust komplett ausgesperrt

**L√∂sung:**
```bash
# 1. Kopiere das Modul
sudo cp /mnt/user-data/outputs/00-core/ssh-rescue.nix /etc/nixos/00-core/

# 2. Aktiviere in configuration.nix
sudo micro /etc/nixos/configuration.nix
# ‚Üí Zeile hinzuf√ºgen:
#    ./00-core/ssh-rescue.nix

# 3. Rebuild
sudo nixos-rebuild switch

# 4. Teste (simuliere Reboot)
sudo systemctl start ssh-recovery-window
# ‚Üí Passwort-Login sollte f√ºr 5min funktionieren

# 5. Nach 5min: Pr√ºfen ob wieder deaktiviert
ssh moritz@localhost -p 53844
# ‚Üí Sollte Key verlangen (kein Passwort mehr)
```

**Ergebnis:**
- ‚úÖ Erste 5 Minuten nach Boot: Passwort-Login m√∂glich
- ‚úÖ Danach: Nur noch SSH-Key
- ‚úÖ Im MOTD erscheint Hinweis

---

## üü° WICHTIG (Diese Woche)

### 3. Shell-Premium aktivieren ‚è±Ô∏è **5 Minuten**

**Nutzen:** Bessere Produktivit√§t mit modernen Tools

**L√∂sung:**
```bash
# 1. Ersetze shell.nix
sudo cp /mnt/user-data/outputs/00-core/shell-premium.nix /etc/nixos/00-core/shell.nix

# 2. Rebuild
sudo nixos-rebuild switch

# 3. Neue Shell starten
bash

# 4. Teste neue Aliase
aliases       # Zeigt alle Shortcuts
sysinfo       # Fastfetch-Banner
services      # Service-Status
ll            # Eza statt ls
```

**Neue Features:**
- ‚úÖ Fastfetch-MOTD (statt statisch)
- ‚úÖ Service-Status beim Login
- ‚úÖ Boot-Warnung (wenn /boot >80%)
- ‚úÖ Moderne Tools (bat, eza, duf)
- ‚úÖ Git-Branch im Prompt

---

### 4. Service-H√§rtung vereinheitlichen ‚è±Ô∏è **2 Stunden**

**Problem:** Einige Services haben keine Sandboxing

**Betroffene Services:**
- monica.nix
- readeck.nix
- miniflux.nix
- audiobookshelf.nix

**L√∂sung (Beispiel: monica.nix):**
```nix
# F√ºge in systemd.services.monica.serviceConfig hinzu:
systemd.services.monica.serviceConfig = {
  # Basis-Schutz
  NoNewPrivileges = lib.mkForce true;
  PrivateTmp = lib.mkForce true;
  PrivateDevices = lib.mkForce true;
  
  # Filesystem-Schutz
  ProtectSystem = lib.mkForce "strict";
  ReadWritePaths = [
    "/var/lib/monica"
    "/var/lib/private/monica"  # phpfpm braucht das
  ];
  ProtectHome = lib.mkForce true;
  
  # Kernel-Schutz
  ProtectKernelTunables = lib.mkForce true;
  ProtectKernelModules = lib.mkForce true;
  RestrictRealtime = lib.mkForce true;
  RestrictSUIDSGID = lib.mkForce true;
  
  # Netzwerk-Einschr√§nkung
  RestrictAddressFamilies = [ "AF_INET" "AF_INET6" "AF_UNIX" ];
};
```

**F√ºr alle 4 Services wiederholen!**

---

### 5. SSO finalisieren (Pocket-ID) ‚è±Ô∏è **30 Minuten**

**Problem:** Pocket-ID l√§uft, ist aber nicht in Services integriert

**L√∂sung:**
```bash
# 1. Kopiere SSO-Modul
sudo cp /mnt/user-data/outputs/10-infrastructure/sso.nix /etc/nixos/10-infrastructure/

# 2. Aktiviere in configuration.nix
sudo micro /etc/nixos/configuration.nix
# ‚Üí Zeile hinzuf√ºgen:
#    ./10-infrastructure/sso.nix

# 3. Rebuild
sudo nixos-rebuild switch

# 4. Teste SSO
# √ñffne: https://nix-sonarr.m7c5.de
# ‚Üí Sollte zu Pocket-ID umleiten
# ‚Üí Nach Login: Weiter zu Sonarr
```

**Gesch√ºtzte Services (nach Aktivierung):**
- Sonarr, Radarr, Prowlarr, Readarr
- Traefik-Dashboard
- Netdata
- Scrutiny

---

## üü† NICE-TO-HAVE (N√§chste Woche)

### 6. Kernel-Optimierung ‚è±Ô∏è **1 Stunde**

**Nutzen:** ~300MB RAM-Ersparnis, schnellerer Boot

```bash
# 1. Kopiere Modul
sudo cp /mnt/user-data/outputs/00-core/kernel-slim.nix /etc/nixos/00-core/

# 2. Aktiviere
sudo micro /etc/nixos/configuration.nix
# ‚Üí Zeile hinzuf√ºgen:
#    ./00-core/kernel-slim.nix

# 3. Rebuild
sudo nixos-rebuild switch

# 4. Reboot (Kernel-√Ñnderungen brauchen Neustart)
sudo reboot

# 5. Nach Reboot: RAM-Verbrauch pr√ºfen
free -h
# Vorher: 2.1 GB
# Nachher: ~1.8 GB
```

**Was wird deaktiviert:**
- Bluetooth-Module (wenn nicht genutzt)
- WiFi-Treiber (Q958 hat nur Ethernet)
- Alte Sound-Treiber (wenn Headless)

---

### 7. Monitoring-Dashboard ‚è±Ô∏è **45 Minuten**

**Nutzen:** Grafische √úbersicht √ºber System-Gesundheit

**Schritt 1: Netdata in Traefik integrieren**
```nix
# In traefik-core.nix hinzuf√ºgen:
services.traefik.dynamicConfigOptions.http = {
  routers.netdata = {
    rule = "Host(`netdata.${domain}`)";
    entryPoints = [ "websecure" ];
    tls.certResolver = "letsencrypt";
    middlewares = [ "secured-chain@file" "local-ip-whitelist@file" ];
    service = "netdata";
  };
  services.netdata.loadBalancer.servers = [{
    url = "http://127.0.0.1:${toString config.my.ports.netdata}";
  }];
};
```

**Schritt 2: Homepage-Dashboard erweitern**
```yaml
# In /data/state/homepage/services.yaml:
- System Monitoring:
    - Netdata:
        href: https://netdata.m7c5.de
        description: Live System Metrics
        icon: netdata.png
    - Scrutiny:
        href: https://scrutiny.m7c5.de
        description: SMART Disk Health
        icon: scrutiny.png
```

---

## üìä AUFWANDS-√úBERSICHT

| Kategorie | Tasks | Zeit | Impact |
|-----------|-------|------|--------|
| üî¥ Kritisch | 2 | 25min | üî•üî•üî• |
| üü° Wichtig | 3 | 3h 35min | üî•üî• |
| üü† Nice-to-Have | 2 | 1h 45min | üî• |
| **GESAMT** | **7** | **~5h 45min** | |

**Empfohlene Reihenfolge:**
1. Boot-Safeguard (Blocker!)
2. SSH-Rescue (Sicherheit)
3. Shell-Premium (Komfort)
4. Service-H√§rtung (Security)
5. SSO (Convenience)
6. Kernel-Slim (Performance)
7. Monitoring (Observability)

---

## üéØ EFFEKT-SIMULATION

### Vorher (Aktuell)
```
Boot:           96MB @ 93%    (7MB frei) ‚ùå
RAM:            2.1 GB Idle
Boot-Zeit:      18 Sekunden
Security:       7/10 (Gaps in H√§rtung)
SSH-Recovery:   ‚ùå Keine
Dashboard:      ‚ö†Ô∏è Statisch
```

### Nachher (Nach Quick Wins)
```
Boot:           96MB @ 65%    (33MB frei) ‚úÖ
RAM:            1.8 GB Idle   (-300MB)
Boot-Zeit:      15 Sekunden   (-3s)
Security:       8.5/10        (+1.5)
SSH-Recovery:   ‚úÖ 5min Window
Dashboard:      ‚úÖ Live + Services
```

---

## üöÄ DEPLOYMENT-CHECKLISTE

### Phase 1: Vorbereitung (5min)
- [ ] Repository aktualisieren: `cd /etc/nixos && git pull`
- [ ] Backup erstellen: `sudo rsync -av /etc/nixos /backup/nixos-$(date +%Y%m%d)`
- [ ] Aktuellen Stand testen: `sudo nixos-rebuild dry-run`

### Phase 2: Kritische Fixes (25min)
- [ ] Boot-Safeguard kopieren + aktivieren
- [ ] SSH-Rescue kopieren + aktivieren
- [ ] Rebuild + Testen

### Phase 3: Verbesserungen (3h)
- [ ] Shell-Premium aktivieren
- [ ] Service-H√§rtung (alle 4 Services)
- [ ] SSO finalisieren
- [ ] Rebuild + Testen

### Phase 4: Optimierung (2h)
- [ ] Kernel-Slim aktivieren + Reboot
- [ ] Monitoring-Integration
- [ ] Finaler Test

### Phase 5: Dokumentation (15min)
- [ ] Commit: `git add -A && git commit -m "feat: quick wins implemented"`
- [ ] Push: `git push`
- [ ] Status aktualisieren: `MASTER_STATUS.md`

---

## ‚ö†Ô∏è TROUBLESHOOTING

### Problem: "Boot-Safeguard funktioniert nicht"

**Check 1:** Service aktiv?
```bash
systemctl status boot-space-monitor
```

**Check 2:** Timer l√§uft?
```bash
systemctl list-timers | grep boot-space
```

**Check 3:** Generationen-Limit gesetzt?
```bash
grep configurationLimit /etc/nixos/configuration.nix
# Sollte '5' sein
```

---

### Problem: "SSH-Rescue l√§sst kein Passwort zu"

**Check 1:** Service gestartet?
```bash
systemctl status ssh-recovery-window
```

**Check 2:** SSHD Config korrekt?
```bash
sudo grep PasswordAuthentication /etc/ssh/sshd_config
# Sollte 'yes' sein (in ersten 5min)
```

**Fix:** Manuell starten
```bash
sudo systemctl start ssh-recovery-window
```

---

### Problem: "Rebuild schl√§gt fehl"

**Check 1:** Syntax-Fehler?
```bash
sudo nixos-rebuild dry-build
# Zeigt Fehler ohne echten Build
```

**Check 2:** /boot voll?
```bash
boot-check
```

**Notfall-Fix:**
```bash
sudo boot-emergency
# L√∂scht alte Generationen
```

---

## üìù CHANGELOG

### 2026-02-26 ‚Äì Initial Release
- 7 Quick Wins definiert
- Priorit√§ten gesetzt
- Troubleshooting hinzugef√ºgt

---

## üîó REFERENZEN

- [NIXOS_ARCHITEKTUR_REVIEW.md](./NIXOS_ARCHITEKTUR_REVIEW.md)
- [MASTER_STATUS.md](./MASTER_STATUS.md)
- [Artefakte 3-8](./00-core/)

---

**Viel Erfolg!** üöÄ  
Bei Problemen: Issue auf GitHub oder Community-Chat
